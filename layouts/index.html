{{ define "main" }}
{{- /* Homepage Hero/Introduction */ -}}
{{- if .Site.Params.homeIntro -}}
  <section class="home-intro">
    <h1>{{ .Site.Params.homeIntro | markdownify }}</h1>
  </section>
{{- end -}}

{{- /* Recent Posts Section */ -}}
{{- $pages := where site.RegularPages "Type" "in" site.Params.mainSections -}}
{{- if $pages -}}
  {{- $paginator := .Paginate $pages 5 -}}
  <section>
    <h2>Recent Posts</h2>
    <ul class="post-list">
      {{- range $paginator.Pages -}}
        <li class="post-list-item">
          <h3 class="post-list-title">
            <a href="{{ .Permalink }}">{{ .Title }}</a>
          </h3>

          <div class="post-meta">
            {{- if .Date -}}
              <div class="post-meta-item">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                  <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                  <line x1="16" y1="2" x2="16" y2="6"></line>
                  <line x1="8" y1="2" x2="8" y2="6"></line>
                  <line x1="3" y1="10" x2="21" y2="10"></line>
                </svg>
                <time datetime="{{ .Date.Format "2006-01-02T15:04:05Z07:00" }}">
                  {{ .Date.Format "January 2, 2006" }}
                </time>
              </div>
            {{- end -}}

            {{- if .ReadingTime -}}
              <div class="post-meta-item">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                  <circle cx="12" cy="12" r="10"></circle>
                  <polyline points="12 6 12 12 16 14"></polyline>
                </svg>
                {{ .ReadingTime }} min read
              </div>
            {{- end -}}
          </div>

          {{- if .Summary -}}
            <p class="post-summary">{{ .Summary }}</p>
          {{- end -}}

          <a href="{{ .Permalink }}" class="read-more">
            Read more
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
              <line x1="5" y1="12" x2="19" y2="12"></line>
              <polyline points="12 5 19 12 12 19"></polyline>
            </svg>
          </a>
        </li>
      {{- end -}}
    </ul>

    {{- /* Pagination */ -}}
    {{- if gt $paginator.TotalPages 1 -}}
      <nav class="pagination" role="navigation" aria-label="Pagination">
        <ul>
          {{- if $paginator.HasPrev -}}
            <li>
              <a href="{{ $paginator.Prev.URL }}" rel="prev" aria-label="Previous page">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                  <polyline points="15 18 9 12 15 6"></polyline>
                </svg>
              </a>
            </li>
          {{- end -}}

          {{- range $paginator.Pagers -}}
            <li>
              {{- if eq . $paginator -}}
                <span class="active" aria-current="page">{{ .PageNumber }}</span>
              {{- else -}}
                <a href="{{ .URL }}" aria-label="Page {{ .PageNumber }}">{{ .PageNumber }}</a>
              {{- end -}}
            </li>
          {{- end -}}

          {{- if $paginator.HasNext -}}
            <li>
              <a href="{{ $paginator.Next.URL }}" rel="next" aria-label="Next page">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                  <polyline points="9 18 15 12 9 6"></polyline>
                </svg>
              </a>
            </li>
          {{- end -}}
        </ul>
      </nav>
    {{- end -}}
  </section>
{{- else -}}
  <section>
    <h2>Welcome</h2>
    <p class="text-secondary">No posts yet. Start creating content!</p>
  </section>
{{- end -}}
{{ end }}
