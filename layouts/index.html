{{ define "main" }}
{{- /* Homepage Hero/Introduction */ -}}
{{- if .Site.Params.homeIntro -}}
  <section class="home-intro">
    <h1>{{ .Site.Params.homeIntro | markdownify }}</h1>
  </section>
{{- end -}}

{{- /* Recent Posts Section */ -}}
{{- $pages := where site.RegularPages "Type" "in" site.Params.mainSections -}}
{{- if $pages -}}
  <section>
    <h2>Recent Posts</h2>
    <ul class="post-list">
      {{- range first 10 $pages -}}
        <li class="post-list-item">
          <h3 class="post-list-title">
            <a href="{{ .Permalink }}">{{ .Title }}</a>
          </h3>

          <div class="post-meta">
            {{- if .Date -}}
              <div class="post-meta-item">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                  <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                  <line x1="16" y1="2" x2="16" y2="6"></line>
                  <line x1="8" y1="2" x2="8" y2="6"></line>
                  <line x1="3" y1="10" x2="21" y2="10"></line>
                </svg>
                <time datetime="{{ .Date.Format "2006-01-02T15:04:05Z07:00" }}">
                  {{ .Date.Format "January 2, 2006" }}
                </time>
              </div>
            {{- end -}}

            {{- if .ReadingTime -}}
              <div class="post-meta-item">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                  <circle cx="12" cy="12" r="10"></circle>
                  <polyline points="12 6 12 12 16 14"></polyline>
                </svg>
                {{ .ReadingTime }} min read
              </div>
            {{- end -}}
          </div>

          {{- if .Summary -}}
            <p class="post-summary">{{ .Summary }}</p>
          {{- end -}}

          <a href="{{ .Permalink }}" class="read-more">
            Read more
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
              <line x1="5" y1="12" x2="19" y2="12"></line>
              <polyline points="12 5 19 12 12 19"></polyline>
            </svg>
          </a>
        </li>
      {{- end -}}
    </ul>

    {{- if gt (len $pages) 10 -}}
      <div style="text-align: center; margin-top: 3rem;">
        <a href="/posts/" class="btn">View All Posts</a>
      </div>
    {{- end -}}
  </section>
{{- else -}}
  <section>
    <h2>Welcome</h2>
    <p class="text-secondary">No posts yet. Start creating content!</p>
  </section>
{{- end -}}
{{ end }}
